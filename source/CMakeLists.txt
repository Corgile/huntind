AUX_SOURCE_DIRECTORY(. SOURCE)
SET(SOURCE_TARGET hd_source)

ADD_LIBRARY(${SOURCE_TARGET} STATIC ${SOURCE})

TARGET_LINK_LIBRARIES(${SOURCE_TARGET} PRIVATE pcap)
IF(USE_THREADS)
    TARGET_LINK_LIBRARIES(${SOURCE_TARGET} PRIVATE /usr/local/lib/librdkafka++.so)
ELSE()
    TARGET_LINK_LIBRARIES(${SOURCE_TARGET} PRIVATE rdkafka++)
ENDIF()
TARGET_LINK_LIBRARIES(${SOURCE_TARGET} PRIVATE ${TORCH_LIBRARIES})